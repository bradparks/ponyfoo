<!---            such pony !
  @nzgb
      so buildfirst#          __|_\_
                            =u__.-.__)
   /web/20150426055858/http://ponyfoo.com           /_/

        very semver 1.0.37--><!DOCTYPE html><html lang="en" itemscope itemtype="http://schema.org/Blog"><head>






<title>Pony Foo</title><style>html { font-family: sans-serif; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; } body { margin: 0; } article, footer, header, main, nav, section{ display: block; } a { background: transparent; } strong { font-weight: bold; } h1 { font-size: 2em; margin: 0.67em 0; } img { border: 0; } code{ font-family: monospace, monospace; font-size: 1em; } html,html:before,html:after,body,body:before,body:after{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}*,*:before,*:after{-webkit-box-sizing:inherit;-moz-box-sizing:inherit;box-sizing:inherit}body{font-family:'Helvetica Neue',HelveticaNeue,TeXGyreHeros,FreeSans,'Nimbus Sans L','Liberation Sans',Helvetica,Arial,sans-serif;background:#f3f4eb;color:#333}ul{margin:0;padding:0;list-style-position:inside}ul{list-style-type:disc}strong,em{text-decoration:none}img{max-width:100%;border:none}::selection{background:#e92c6c;color:#fff;text-shadow:0 1px rgba(0,0,0,0.2)}::-webkit-input-placeholder{color:#999}:-moz-placeholder{color:#999}::-moz-placeholder{color:#999}:-ms-input-placeholder{color:#999}a{cursor:pointer;text-decoration:none}a{color:#e92c6c;font-weight:bold;}h1,h2{font-family:'Cardo','Helvetica Neue',HelveticaNeue,TeXGyreHeros,FreeSans,'Nimbus Sans L','Liberation Sans',Helvetica,Arial,sans-serif}body{word-wrap:break-word;overflow-x:hidden;overflow-y:scroll;width:93.75%;max-width:1250px;margin:0 auto;text-align:center}main{display:inline-block;text-align:left;width:100%}@media only screen and (min-width:768px){main{padding-bottom:25px}}h1,h2{color:#412917;font-weight:bold}h1{font-size:1.6em}h2{font-size:1.5em}@media only screen and (min-width:768px){h1{font-size:2.2em}h2{font-size:2em}}h1,h2{margin-bottom:15px;padding-bottom:6px}code{font-family:Consolas,Menlo,Monaco,'Lucida Console','Liberation Mono','DejaVu Sans Mono','Bitstream Vera Sans Mono','Courier New',monospace,serif}.uv-clearfix:after{content:' ';display:block;visibility:hidden;clear:both;font-size:0;height:0}[aria-label]{position:relative}[aria-label]:not(.hint-before):after{display:none;position:absolute;top:101%;left:6px;z-index:5000;pointer-events:none;padding:8px 10px;line-height:15px;white-space:nowrap;text-decoration:none;text-indent:0;overflow:visible;font-size:12px;font-weight:normal;color:#fff;text-shadow:1px 0 1px #888;background-color:#412917;border-left:6px solid #d37092;-webkit-border-radius:2px;border-radius:2px;-webkit-box-shadow:1px 2px 6px rgba(0,0,0,0.3);box-shadow:1px 2px 6px rgba(0,0,0,0.3)}[aria-label]:not(.hint-before):after{content:attr(aria-label)}@media only print{[aria-label]:not(.hint-before):after{display:none}}.tg-tags{cursor:default;display:block}.tg-tag-item{display:inline-block;list-style:none;line-height:40px;margin-right:5px;}.tg-tag-item:last-child{margin-right:0}.tg-tag{padding:2px 4px;background-color:#e0e0cf;-webkit-box-shadow:1px 1px 1px #cbc5c0;box-shadow:1px 1px 1px #cbc5c0;margin-right:10px;}@media screen and (min-width:768px){.tg-tags{display:inline-block}.tg-tag{margin:0}.tg-tag-item{line-height:inherit}}:not(.hljs-pre) > .hljs{padding:0 6px 2px;line-height:22px;margin:0 2px}.hljs{display:inline-block;padding:.5em;color:#333;background:#f8f8f8}.md-markdown :not(pre) > .hljs{display:inline}.md-markdown p:first-child{margin-top:0}.md-markdown p:last-child{margin-bottom:0}.vw-title{margin:0 0 30px;border-bottom:none}.ly-title{margin-top:0;padding-top:5px;border-bottom:4px solid #e0e0cf;font-size:2.5em;font-family:'Merriweather','Helvetica Neue',HelveticaNeue,TeXGyreHeros,FreeSans,'Nimbus Sans L','Liberation Sans',Helvetica,Arial,sans-serif;text-align:left;}.ly-title .ly-title-anchor{color:#412917}.ly-title-anchor{-webkit-transition:text-shadow 0.2s ease-in-out;-moz-transition:text-shadow 0.2s ease-in-out;-o-transition:text-shadow 0.2s ease-in-out;-ms-transition:text-shadow 0.2s ease-in-out;transition:text-shadow 0.2s ease-in-out;}.ly-legend{display:none;color:#a4d4e6;font-weight:normal;font-style:italic;font-family:'Merriweather','Helvetica Neue',HelveticaNeue,TeXGyreHeros,FreeSans,'Nimbus Sans L','Liberation Sans',Helvetica,Arial,sans-serif;font-size:1em;border-bottom:0}.ly-section{padding:10px;margin-bottom:25px;background-color:#eaeadf}@media screen and (min-width:768px){.ly-title{text-align:center;font-size:4.5em;padding-top:25px}.ly-legend{display:block}.ly-section{padding:25px}.ly-main{vertical-align:top;display:inline-block}.ly-main{width:100%;padding-right:320px;margin-right:-300px}}.nv-logon{display:none}.nv-logon-anchor{position:fixed;top:0;right:0;padding:10px;opacity:0;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";filter:alpha(opacity=0);color:#fff;}.nv-search{float:right;background-color:#e92c6c;margin-top:13px;padding:8px 12px;color:#fff;-webkit-box-shadow:1px 1px 1px #b60039;box-shadow:1px 1px 1px #b60039;}.nv-search:after{display:inline-block;font-family:monospace;margin-left:8px;content:'â†“'}@media screen and (min-width:768px){.nv-logon{display:block}.nv-search{display:none}}.at-header{margin-bottom:15px}.at-title{text-align:center;margin-top:0;font-size:2.6em;}.at-title .at-title-link{color:#111;text-decoration:none}.at-title .at-title-link{-webkit-transition:text-shadow 0.2s ease-in-out;-moz-transition:text-shadow 0.2s ease-in-out;-o-transition:text-shadow 0.2s ease-in-out;-ms-transition:text-shadow 0.2s ease-in-out;transition:text-shadow 0.2s ease-in-out;}.at-teaser > p:first-of-type{font-family:'Merriweather','Helvetica Neue',HelveticaNeue,TeXGyreHeros,FreeSans,'Nimbus Sans L','Liberation Sans',Helvetica,Arial,sans-serif}.at-teaser > p:first-child{font-family:'Merriweather','Helvetica Neue',HelveticaNeue,TeXGyreHeros,FreeSans,'Nimbus Sans L','Liberation Sans',Helvetica,Arial,sans-serif}.at-meta{display:none;float:right;font-style:italic;color:#7a0000}.at-corpus{margin-bottom:25px}.at-full{margin-top:25px;text-align:center}.at-full-button{display:inline-block;padding:16px;background-color:#e92c6c;-webkit-box-shadow:1px 1px 1px rgba(0,0,0,0.2);box-shadow:1px 1px 1px rgba(0,0,0,0.2);color:#fff;}@media screen and (min-width:768px){.at-title{text-align:inherit;font-size:3em}.at-meta{display:inherit}}@media print{.nv-search,.ly-header,.nv-container,.at-full,.at-meta{display:none}body,.ly-section{background-color:transparent}}</style><meta charset="utf-8"><link rel="shortcut icon" href="https://web.archive.org/web/20150426055858im_/http://ponyfoo.com/favicon.ico"><link rel="alternate" type="application/rss+xml" href="http://ponyfoo.com/articles/feed"><link rel="search" type="application/opensearchdescription+xml" title="Pony Foo" href="http://ponyfoo.com/opensearch.xml"><link rel="canonical" href="http://ponyfoo.com/"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" itemprop="creator" content="Nicolas Bevacqua <foo@bevacqua.io>"><meta name="keywords" content="sharedworker,localstorage"><meta name="description" property="og:description" itemprop="description" content="Pony Foo is a technical blog maintained by Nicolas Bevacqua, where he shares his thoughts on JavaScript and the web. Nico likes writing, public speaking, and open-source."><meta property="og:site_name" content="Pony Foo"><meta property="og:url" itemprop="url" content="/"><meta name="twitter:title" itemprop="name" property="og:title" content="Pony Foo"><meta name="twitter:description" content="Pony Foo is a technical blog maintained by Nicolas Bevacqua, where he shares his thoughts on JavaScript and the web. Nico likes writing, public speaking, and open-source."><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@ponyfoo"><meta name="twitter:creator" content="@nzgb"><meta property="og:image" itemprop="images" content="https://github.com/bevacqua/dragula/raw/master/resources/demo.png"><meta property="og:image" content="http://i.imgur.com/u4Vdu3R.jpg"><meta property="og:image" content="http://i.imgur.com/NqHl1zm.png"><meta property="og:image" content="http://i.imgur.com/d9M762N.png"><meta property="og:image" content="http://ponyfoo.com/img/thumbnail.png"><meta name="twitter:image:src" content="https://github.com/bevacqua/dragula/raw/master/resources/demo.png"><script>~function(e){var l=e.createElement("link"),t=e.getElementsByTagName("head")[0];l.rel="stylesheet",l.href="/css/all.5b20f3d5.css",l.media="only x",t.appendChild(l),setTimeout(function(){l.media="all"})}(document);</script><script>~function(e){var t=e.createElement("link"),a=e.getElementsByTagName("head")[0];t.rel="stylesheet",t.href="https://web.archive.org/web/20150426055858/http://fonts.googleapis.com/css?family=Cardo:700|Merriweather:400italic,400,700",t.media="only x",a.appendChild(t),setTimeout(function(){t.media="all"})}(document);</script><noscript><style>.js-only{display:none !important}</style><link rel="stylesheet" type="text/css" href="https://web.archive.org/web/20150426055858cs_/http://ponyfoo.com/css/all.5b20f3d5.css"><link rel="stylesheet" type="text/css" href="https://web.archive.org/web/20150426055858cs_/http://fonts.googleapis.com/css?family=Cardo:700|Merriweather:400italic,400,700"></noscript></head><body id="top">



<a href="#search" class="nv-search">Search</a><header class="ly-header vw-title"><h1 class="ly-title"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/" aria-label="Go to home" class="ly-title-anchor">Pony Foo</a></h1><h2 class="ly-legend">Ramblings of a degenerate coder</h2></header><nav class="nv-container"><div class="nv-logon"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/account/login" class="nv-logon-anchor">Login</a></div></nav><main class="ly-main"><article itemscope="itemscope" itemtype="http://schema.org/BlogPosting" class="at-article ly-section"><meta itemprop="dateCreated" content="2015-04-20T04:21:59+00:00"/><meta itemprop="datePublished" content="2015-04-20T14:00:20+00:00"/><meta itemprop="dateModified" content="2015-04-21T19:41:51+00:00"/><meta itemprop="keywords" content="front-end,modularity,javascript,components"/><meta itemprop="discussionUrl" content="http://ponyfoo.com/articles/great-web-module-compendium#comments"/><header class="at-header uv-clearfix"><h1 class="at-title"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/great-web-module-compendium" aria-label="Tagged: front-end, modularity, javascript, components" itemprop="headline" class="at-title-link">The Great Web Module Compendium</a></h1><span class="at-meta"><span>reading time: </span><time aria-label="You're probably faster than that!">7 minutes</time><span>, published </span><time aria-label="Published Monday 20th, April 2015 at 14:00" datetime="2015-04-20T14:00:20+00:00">6 days ago</time></span></header><section itemprop="articleBody" class="at-corpus"><section itemprop="about" class="md-markdown at-teaser"><p>For the past few months I&#x2019;ve developed quite the number of front-end modules. These range from UI components to utility libraries, silly games, and everything in between. I&apos;ve put together this article briefly describing many of those modules in hopes that somebody puts them to good use.</p><p>I&apos;ve organized the modules into a few different categories. Let me know if you find any of this to be useful!</p></section><section class="at-full"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/great-web-module-compendium" aria-label="Quality content awaits!" class="at-full-button">Read the full article</a></section></section><footer><ul class="tg-tags"><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/front-end" aria-label="Find articles tagged &quot;front-end&quot;" class="tg-tag">front-end</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/modularity" aria-label="Find articles tagged &quot;modularity&quot;" class="tg-tag">modularity</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/javascript" aria-label="Find articles tagged &quot;javascript&quot;" class="tg-tag">javascript</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/components" aria-label="Find articles tagged &quot;components&quot;" class="tg-tag">components</a></li></ul></footer></article><article itemscope="itemscope" itemtype="http://schema.org/BlogPosting" class="at-article ly-section"><meta itemprop="dateCreated" content="2015-04-07T21:50:41+00:00"/><meta itemprop="datePublished" content="2015-04-14T12:10:43+00:00"/><meta itemprop="dateModified" content="2015-04-20T14:00:20+00:00"/><meta itemprop="keywords" content="bash,aws,ami,immutable-deployments"/><meta itemprop="discussionUrl" content="http://ponyfoo.com/articles/leveraging-immutable-deployments#comments"/><header class="at-header uv-clearfix"><h1 class="at-title"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/leveraging-immutable-deployments" aria-label="Tagged: bash, aws, ami, immutable-deployments" itemprop="headline" class="at-title-link">Leveraging Immutable Deployments</a></h1><span class="at-meta"><span>reading time: </span><time aria-label="You're probably faster than that!">27 minutes</time><span>, published </span><time aria-label="Published Tuesday 14th, April 2015 at 12:10" datetime="2015-04-14T12:10:43+00:00">12 days ago</time></span></header><section itemprop="articleBody" class="at-corpus"><section itemprop="about" class="md-markdown at-teaser"><p>Last time around, we discussed <a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/immutable-deployments-packer" aria-label="Immutable Deployments and Packer">how to create an AMI for every deployment</a>: a crucial step in enabling you to leverage deployment immutability. This time around we&apos;ll learn what it takes to automate autoscaling immutable deployments with zero-downtime, while sitting behind a load balancer and using Route 53 for DNS.</p><p>Given the <a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/immutable-deployments-packer" aria-label="Immutable Deployments and Packer">immutable images we&apos;re now able to build</a>, thanks to the last article, in this article we&apos;ll lay out an architecture, based on <strong>Amazon Web Services</strong>, that&apos;s able to take advantage of those immutable images.</p><h1>Architecture Overview</h1><p>Our journey starts at <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/route53/" aria-label="Amazon Web Services Route 53">Route 53</a>, a DNS provider service from Amazon. You&apos;ll set up the initial DNS configuration by hand. I&apos;ll leave the <code class="hljs">NS</code>, <code class="hljs">SOA</code>, and <code class="hljs">TXT</code> records up to you. The feature that interests me in Route 53 is <a href="https://web.archive.org/web/20150426055858/http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resource-record-sets-choosing-alias-non-alias.html" aria-label="Choosing Between Alias and Non-Alias Resource Record Sets">creating <code class="hljs">ALIAS</code> record sets</a>. These special record sets allow you to bind a domain name to an <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/elasticloadbalancing/" aria-label="Amazon Elastic Load Balancers">Elastic Load Balancer <em>(ELB)</em></a>, which can then distribute traffic among your <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/ec2/" aria-label="Amazon Elastic Cloud Compute">Elastic Cloud Compute <em>(EC2)</em></a> server instances.</p><p>The eye candy in <code class="hljs">ALIAS</code> record sets is that you&apos;re able to use them at the naked, or apex domain level <em>(e.g <code class="hljs">ponyfoo.com</code>)</em>, and not just sub-domains <em>(e.g <code class="hljs">blog.ponyfoo.com</code>)</em>. Our scripts will set up these <code class="hljs">ALIAS</code> records on our behalf whenever we want to deploy to a new environment, also a very enticing feature.</p><blockquote><p>When you finish reading this article, you&apos;ll be able to run the commands below and have your application listening at <code class="hljs">dev01.example.com</code> when they complete, without the need for any manual actions.</p><pre><code class="hljs bash">NODE_ENV=dev01 npm run setup
NODE_ENV=dev01 npm run deploy
</code></pre></blockquote><p>We don&apos;t merely use <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/elasticloadbalancing/" aria-label="Amazon Elastic Load Balancers">ELB</a> because of its ability to route traffic from naked domains, but also because it enables us to have many web servers behind a single domain, which makes our application more robust and better able to handle load, becoming <em>highly available</em>.</p><p>In order to better manage the instances behind our <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/elasticloadbalancing/" aria-label="Amazon Elastic Load Balancers">ELB</a>, we&apos;ll use <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/autoscaling/" aria-label="Amazon Auto Scaling Groups">Auto Scaling Groups <em>(ASG)</em></a>. These come at no extra cost, you just pay for the <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/ec2/" aria-label="Amazon Elastic Cloud Compute">EC2</a> instances in them. The <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/autoscaling/" aria-label="Amazon Auto Scaling Groups">ASG</a> will automatically detect <em>&quot;unhealthy&quot;</em> <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/ec2/" aria-label="Amazon Elastic Cloud Compute">EC2</a> instances, or instances that the <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/elasticloadbalancing/" aria-label="Amazon Elastic Load Balancers">ELB</a> has deemed unreachable after pinging them with <code class="hljs">GET</code> requests. Unhealthy instances are automatically disconnected from the <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/elasticloadbalancing/" aria-label="Amazon Elastic Load Balancers">ELB</a>, meaning they&apos;ll no longer receive traffic. However, we&apos;ll enable <a href="https://web.archive.org/web/20150426055858/https://aws.amazon.com/blogs/aws/elb-connection-draining-remove-instances-from-service-with-care/" aria-label="ELB Connection Draining &#x2013; Remove Instances From Service With Care">connection draining</a> so that they gracefully respond to pending requests before shutting down.</p><p>When a new deployment is requested, we&apos;ll create a new <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/autoscaling/" aria-label="Amazon Auto Scaling Groups">ASG</a>, and provision it with the new <code class="hljs">carnivore</code> AMI, <a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/immutable-deployments-packer" aria-label="Immutable Deployments and Packer">which you may recall from our last encounter</a>. The new <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/autoscaling/" aria-label="Amazon Auto Scaling Groups">ASG</a> will spin as many <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/ec2/" aria-label="Amazon Elastic Cloud Compute">EC2</a> instances as desired. We&apos;ll wait until <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/ec2/" aria-label="Amazon Elastic Cloud Compute">EC2</a> reports every one of those instances are properly initialized and healthy. We&apos;ll then wait until <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/elasticloadbalancing/" aria-label="Amazon Elastic Load Balancers">ELB</a> reports every one of those instances is reachable via <code class="hljs">HTTP</code>. This ensures that no downtime occurs during our deployment. When every new instance is reachable on <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/elasticloadbalancing/" aria-label="Amazon Elastic Load Balancers">ELB</a>, we&apos;ll remove the outdated <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/ec2/" aria-label="Amazon Elastic Cloud Compute">EC2</a> instances from <a href="https://web.archive.org/web/20150426055858/http://aws.amazon.com/elasticloadbalancing/" aria-label="Amazon Elastic Load Balancers">ELB</a> first, and <em>downscale the outdated ASG to 0</em>. This will cause the ASG to allow connection draining to kick in on the outdated instances, and terminate them afterwards. Once all of that is over, we delete the outdated ASG.</p><blockquote><p>This approach might not be blazing fast, but I&apos;ll take a speed bump over downtime any day.</p></blockquote><p>Of course, none of this would be feasible if spinning a new instance took 15 minutes while installing software that should&apos;ve been baked into an image. This is why creating those images was crucial. In a slow process such as this, baking images saves us much appreciated startup time.</p></section><section class="at-full"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/leveraging-immutable-deployments" aria-label="Quality content awaits!" class="at-full-button">Read the full article</a></section></section><footer><ul class="tg-tags"><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/bash" aria-label="Find articles tagged &quot;bash&quot;" class="tg-tag">bash</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/aws" aria-label="Find articles tagged &quot;aws&quot;" class="tg-tag">aws</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/ami" aria-label="Find articles tagged &quot;ami&quot;" class="tg-tag">ami</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/immutable-deployments" aria-label="Find articles tagged &quot;immutable-deployments&quot;" class="tg-tag">immutable-deployments</a></li></ul></footer></article><article itemscope="itemscope" itemtype="http://schema.org/BlogPosting" class="at-article ly-section"><meta itemprop="dateCreated" content="2015-04-07T18:36:15+00:00"/><meta itemprop="datePublished" content="2015-04-08T12:36:47+00:00"/><meta itemprop="dateModified" content="2015-04-14T12:10:44+00:00"/><meta itemprop="keywords" content="packer,aws,ami,immutable-deployments"/><meta itemprop="discussionUrl" content="http://ponyfoo.com/articles/immutable-deployments-packer#comments"/><header class="at-header uv-clearfix"><h1 class="at-title"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/immutable-deployments-packer" aria-label="Tagged: packer, aws, ami, immutable-deployments" itemprop="headline" class="at-title-link">Immutable Deployments and Packer</a></h1><span class="at-meta"><span>reading time: </span><time aria-label="You're probably faster than that!">22 minutes</time><span>, published </span><time aria-label="Published Wednesday 8th, April 2015 at 12:36" datetime="2015-04-08T12:36:47+00:00">18 days ago</time></span></header><section itemprop="articleBody" class="at-corpus"><section itemprop="about" class="md-markdown at-teaser"><p>A correct<em>er</em> title for this series would be something along the lines of <strong>&quot;Automating autoscaled zero-downtime immutable deployments using plain old bash, <a href="https://web.archive.org/web/20150426055858/http://packer.io/" aria-label="Packer by HashiCorp">Packer</a>, nginx, Node.js, and AWS&quot;</strong>, but that would&apos;ve been kind of long <em>(although it does fit on a tweet)</em>. My last article on the subject was two years ago, when I wrote about <a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/deploying-node-apps-to-aws-using-grunt">Deploying Node apps to AWS using Grunt</a>. Here&apos;s a <em>long overdue</em> update, containing everything I&apos;ve learned about deployments in the time since then.</p><p>This detailed article series aims to explain:</p><ul><li>How to provision a ready-made image <em>before every deployment</em></li><li>How to make that image set up <code class="hljs">nginx</code>, <code class="hljs">node</code>, and your web application</li><li>How to dynamically update DNS record sets</li><li>How to let AWS handle scaling on your behalf</li><li>How to <strong>avoid downtime</strong> during deployments</li><li>How to clean up all this mess</li><li>How to do all of the above in <strong>plain old bash</strong></li><li><em>Why any of the above matters</em></li></ul><p>In this article <strong>I&apos;ll start by explaining why doing any of this matters</strong>, and then move on to <em>creating <a href="https://web.archive.org/web/20150426055858/http://chadfowler.com/blog/2013/06/23/immutable-deployments/" aria-label="Trash Your Servers and Burn Your Code: Immutable Infrastructure and Disposable Components">immutable</a> images</em> ready for deployment using <a href="https://web.archive.org/web/20150426055858/http://packer.io/" aria-label="Packer by HashiCorp">Packer</a>.</p></section><section class="at-full"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/immutable-deployments-packer" aria-label="Quality content awaits!" class="at-full-button">Read the full article</a></section></section><footer><ul class="tg-tags"><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/packer" aria-label="Find articles tagged &quot;packer&quot;" class="tg-tag">packer</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/aws" aria-label="Find articles tagged &quot;aws&quot;" class="tg-tag">aws</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/ami" aria-label="Find articles tagged &quot;ami&quot;" class="tg-tag">ami</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/immutable-deployments" aria-label="Find articles tagged &quot;immutable-deployments&quot;" class="tg-tag">immutable-deployments</a></li></ul></footer></article><article itemscope="itemscope" itemtype="http://schema.org/BlogPosting" class="at-article ly-section"><meta itemprop="dateCreated" content="2015-02-06T01:15:20+00:00"/><meta itemprop="datePublished" content="2015-02-06T01:15:20+00:00"/><meta itemprop="dateModified" content="2015-04-08T12:36:47+00:00"/><meta itemprop="keywords" content="server-first,taunus,ember,react,angular,progressive-enhancement"/><meta itemprop="discussionUrl" content="http://ponyfoo.com/articles/server-first-apps#comments"/><header class="at-header uv-clearfix"><h1 class="at-title"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/server-first-apps" aria-label="Tagged: server-first, taunus, ember, react, angular, progressive-enhancement" itemprop="headline" class="at-title-link">Server-First Apps are a Good Idea</a></h1><span class="at-meta"><span>reading time: </span><time aria-label="You're probably faster than that!">9 minutes</time><span>, published </span><time aria-label="Published Friday 6th, February 2015 at 01:15" datetime="2015-02-06T01:15:20+00:00">3 months ago</time></span></header><section itemprop="articleBody" class="at-corpus"><section itemprop="about" class="md-markdown at-teaser"><p>Earlier today, <a href="https://web.archive.org/web/20150426055858/http://tomdale.net/2015/02/youre-missing-the-point-of-server-side-rendered-javascript-apps/" aria-label="You&#x2019;re Missing the Point of Server-Side Rendered JavaScript Apps">Tom Dale published an article</a> sharing his views on the whole &quot;server-side vs client-side rendered apps&quot; debacle. I was tempted to call this article <strong>No. You&#x2019;re Missing the Point of Server-Side Rendered JavaScript Apps!</strong>, but that would&apos;ve been way too long, <em>and kind of childish</em>. I agree with the first sentence in his article, where he states that there&apos;s a lot of confusion about <em>&quot;the push to rendering JavaScript apps on the server-side&quot;</em>. There were many other parts of the article I agreed with, and a few I didn&apos;t agree so much with. There&apos;s also some points which weren&apos;t discussed but I&apos;d like to raise myself.</p><p>In the article, Tom goes on to explain how applications rendered on the server-side are clumsy when it comes to responsiveness. This is a fair point, server-side rendered applications typically rely on the <a href="https://web.archive.org/web/20150426055858/http://stackoverflow.com/questions/tagged/post-redirect-get" aria-label="Questions tagged POST-Redirect-Get on StackOverflow">PRG <em>(POST-Redirect-GET)</em> pattern</a>. They have HTML <code class="hljs">&lt;form&gt;</code>s, users <code class="hljs">POST</code> some data, the server processes the request, responds with a redirect to another page, and the client <code class="hljs">GET</code>s that other page. These are pretty much the basics of the web. What&apos;s worse, as Tom notes, is that as you start adding AJAX calls to this server-side rendered content, you are now a slave to both state <em>(what you initially pulled from the server)</em> and behavior <em>(users clicking on things)</em> when it comes to updating the UI. <strong>That is the ultimate nightmare of a web developer.</strong></p><p>Client-side rendered apps, in contrast, can be <em>way faster than that</em>. Once the initial payload is downloaded, interpreted, and executed, client-side JavaScript can set up its own <strong>smart caching on the client-side</strong>, avoiding roundtrips to the server for data it already has, and it can also set up routing on the client-side to emulate incredibly-fast roundtrips. It can even have the server spewing information downstream as soon as it has any fresh data to offer, <a href="https://web.archive.org/web/20150426055858/http://socket.io/" aria-label="Socket.IO is one way to use WebSockets">using WebSockets</a>. The issue of updating the UI as a slave to many masters is long gone, since you just update the UI as the client-side JavaScript engine demands of you.</p><p><em>And so the story goes...</em></p><p>The answer to a productive and maintainable web development orientation, <em>that also favors customers</em>, doesn&apos;t lie in one or the other, but rather in <em>the combination of both approaches</em>. In this article, I&apos;ll explore what all of this means.</p></section><section class="at-full"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/server-first-apps" aria-label="Quality content awaits!" class="at-full-button">Read the full article</a></section></section><footer><ul class="tg-tags"><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/server-first" aria-label="Find articles tagged &quot;server-first&quot;" class="tg-tag">server-first</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/taunus" aria-label="Find articles tagged &quot;taunus&quot;" class="tg-tag">taunus</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/ember" aria-label="Find articles tagged &quot;ember&quot;" class="tg-tag">ember</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/react" aria-label="Find articles tagged &quot;react&quot;" class="tg-tag">react</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/angular" aria-label="Find articles tagged &quot;angular&quot;" class="tg-tag">angular</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/progressive-enhancement" aria-label="Find articles tagged &quot;progressive-enhancement&quot;" class="tg-tag">progressive-enhancement</a></li></ul></footer></article><article itemscope="itemscope" itemtype="http://schema.org/BlogPosting" class="at-article ly-section"><meta itemprop="dateCreated" content="2015-01-14T20:26:13+00:00"/><meta itemprop="datePublished" content="2015-01-19T12:21:07+00:00"/><meta itemprop="dateModified" content="2015-02-06T01:15:20+00:00"/><meta itemprop="keywords" content="modularity,insignia,rome"/><meta itemprop="discussionUrl" content="http://ponyfoo.com/articles/baking-modularity-tag-editing#comments"/><header class="at-header uv-clearfix"><h1 class="at-title"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/baking-modularity-tag-editing" aria-label="Tagged: modularity, insignia, rome" itemprop="headline" class="at-title-link">Baking Modularity into Tag Editing</a></h1><span class="at-meta"><span>reading time: </span><time aria-label="You're probably faster than that!">6 minutes</time><span>, published </span><time aria-label="Published Monday 19th, January 2015 at 12:21" datetime="2015-01-19T12:21:07+00:00">3 months ago</time></span></header><section itemprop="articleBody" class="at-corpus"><section itemprop="about" class="md-markdown at-teaser"><p>For quite some time I&apos;ve been wanting some sort of input that dealt with user-submitted tags in a reasonable way. I wanted this input to still be half-decent when JavaScript was out of the picture, so this meant starting with the basic building blocks of HTML.</p><p>Turns out, all libraries out there <em>(google for <a href="https://web.archive.org/web/20150426055858/https://www.google.com/search?q=tag+input+javascript" aria-label="Google Search results for &apos;tag input javascript&apos;">&quot;tag input javascript&quot;</a> if you&apos;re curious)</em> that do this have at least one of these flaws.</p><ul><li>Feature bloat</li><li>Human unfriendly</li><li>Addiction to dependencies</li></ul><p>Instead of creating separate components for, <em>say</em>, tag input and autocompletion, most of these libraries try to do it all, and fail miserably at <strong>doing any one thing well</strong>. This is the <em>defining characteristic</em> of modular development, where we define a <em>(narrow)</em> purpose for what we&apos;re building and we set out to build the best possible solution to meet that purpose.</p><blockquote><p>Multi-purpose libraries end up doing a lot of things I do not need or want, while single-purpose components typically do exactly what you need.</p></blockquote><p>Being user friendly is why we build these libraries, and yet I couldn&apos;t find a single library that I would&apos;ve used over a simple <code class="hljs">&lt;input type=&apos;text&apos; /&gt;</code> and telling my humans to enter tags separated by a single space. The vast majority of these presented inconveniences such as being <strong>unable to walk around the input</strong> like we do in an input tag, insert tags in any position, or <strong>not even allowing humans to edit tags</strong> once they receive the <em>&quot;this is a tag&quot;</em> treatment.</p><blockquote><p>Human-facing interface elements <em>must</em> be sensitive to the needs of the human. Sometimes we have to wonder if a component is even worth the trouble. Wouldn&apos;t a simple <code class="hljs">&lt;input&gt;</code> be <strong>more amicable</strong> than an inflexible <em>&quot;tag input&quot;</em> solution? Is the component more useful to your humans?</p></blockquote><p>Finally, most of these libraries tie themselves to a dependency. If I really liked one of them, I probably would&apos;ve needed to commit to jQuery myself. Or Angular. Or React. It doesn&apos;t matter what their <em>&quot;big dependency&quot;</em> is, the point is that it <strong>constraints</strong> the consumer from being able to easily <strong>port the component to different projects</strong> with other assortments of frameworks or libraries.</p><blockquote><p>The fact that most of them count jQuery among their dependencies leaves much to be desired.</p></blockquote><p>This article will explore the approach I took to build <a href="https://web.archive.org/web/20150426055858/https://github.com/bevacqua/insignia" aria-label="bevacqua/insignia on GitHub">Insignia</a> in just one day, as I think you may apply some of these concepts to any development you do on a daily basis.</p></section><section class="at-full"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/baking-modularity-tag-editing" aria-label="Quality content awaits!" class="at-full-button">Read the full article</a></section></section><footer><ul class="tg-tags"><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/modularity" aria-label="Find articles tagged &quot;modularity&quot;" class="tg-tag">modularity</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/insignia" aria-label="Find articles tagged &quot;insignia&quot;" class="tg-tag">insignia</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/rome" aria-label="Find articles tagged &quot;rome&quot;" class="tg-tag">rome</a></li></ul></footer></article><article itemscope="itemscope" itemtype="http://schema.org/BlogPosting" class="at-article ly-section"><meta itemprop="dateCreated" content="2015-01-08T14:48:17+00:00"/><meta itemprop="datePublished" content="2015-01-08T14:48:17+00:00"/><meta itemprop="dateModified" content="2015-01-19T12:54:23+00:00"/><meta itemprop="keywords" content="sharedworker,localstorage"/><meta itemprop="discussionUrl" content="http://ponyfoo.com/articles/cross-tab-communication#comments"/><header class="at-header uv-clearfix"><h1 class="at-title"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/cross-tab-communication" aria-label="Tagged: sharedworker, localstorage" itemprop="headline" class="at-title-link">Cross-tab Communication</a></h1><span class="at-meta"><span>reading time: </span><time aria-label="You're probably faster than that!">5 minutes</time><span>, published </span><time aria-label="Published Thursday 8th, January 2015 at 14:48" datetime="2015-01-08T14:48:17+00:00">4 months ago</time></span></header><section itemprop="articleBody" class="at-corpus"><section itemprop="about" class="md-markdown at-teaser"><p>The upcoming <a href="https://web.archive.org/web/20150426055858/https://developer.mozilla.org/en-US/docs/Web/API/SharedWorker" aria-label="SharedWorker Web API on MDN">SharedWorker</a> API allows to transmit data across iframes and even browser tabs or windows. It landed in Chrome years ago, and not so long ago in Firefox, but it&apos;s <a href="https://web.archive.org/web/20150426055858/http://caniuse.com/#feat=sharedworkers" aria-label="Can I Use SharedWorkers?">nowhere to be seen</a> in IE or Safari. A wildly supported alternative exists that can be used today, but it&apos;s largely unknown. Let&apos;s explore it!</p><p>I wanted an elegant solution to the following scenario: suppose a human walks into your website, logs in, <strong>opens a second tab</strong>, and logs out in that tab. He&apos;s still <em>&quot;logged in&quot;</em> on the first tab, except anything he touches will either redirect them to the login page or straight blow up in their face. A more inviting alternative would be to figure out that they&apos;re logged out and do something about it, such as display a dialog asking them to re-authenticate, or maybe the login view itself.</p><p>You could use the WebSocket API for this, but that&apos;d be overkill. I wanted a lower-level technology flyswatter, so I started looking for cross-tab communication options. The first option that popped up was using cookies or <code class="hljs">localStorage</code>, and then periodically checking whether they were logged in or not via <code class="hljs">setInterval</code>. I wasn&apos;t satisfied with that answer because it would waste too many CPU cycles checking for something that might not ever come up. At that point I would&apos;ve rather used a <em><a href="https://web.archive.org/web/20150426055858/http://stackoverflow.com/a/12855533/389745" aria-label="What are Long-Polling, Websockets, Server-Sent Events (SSE) and Comet?">&quot;comet&quot;</a> (also known as long-polling)</em>, Server-Sent Events, or WebSockets.</p><p>I was surprised to see that the answer was lying in front of my nose, it was <code class="hljs">localStorage</code> all along!</p></section><section class="at-full"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/cross-tab-communication" aria-label="Quality content awaits!" class="at-full-button">Read the full article</a></section></section><footer><ul class="tg-tags"><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/sharedworker" aria-label="Find articles tagged &quot;sharedworker&quot;" class="tg-tag">sharedworker</a></li><li class="tg-tag-item"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/tagged/localstorage" aria-label="Find articles tagged &quot;localstorage&quot;" class="tg-tag">localstorage</a></li></ul></footer></article><footer class="at-more ly-section"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/?skip=6" class="at-more-button uv-button">I crave more articles!</a></footer></main><aside class="ly-aside"><section class="ly-section ca-container"><script id="_carbonads_js" src="https://web.archive.org/web/20150426055858js_/http://cdn.carbonads.com/carbon.js?zoneid=1673&amp;serve=C6AILKT&amp;placement=ponyfoocom" async="async"></script></section><form id="search" action="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/search" method="get" name="search" class="ly-section sr-container"><input placeholder="e.g JavaScript" name="terms" class="de-input sr-input"/><span aria-label="Pro Tip: use &quot;[js]&quot; to search for article tags!" class="de-submit"><input type="submit" value="Search" class="de-button sr-button uv-button"/></span></form><form action="https://web.archive.org/web/20150426055858/http://ponyfoo.com/api/subscribers" method="post" name="subscribe" class="ly-section ss-container"><div class="ss-label">Subscribe to our mailing list and be the first to know when new articles come out!</div><div class="ss-label">One-click unsubscribe, anytime.</div><noscript><input name="verify" value="Promise not to be a bot? Clear this field!" placeholder="This field is only for tricksters..." class="uv-verify"/></noscript><input placeholder="you@provider.io" name="subscriber" class="de-input ss-input"/><span aria-label="As easy as clicking this button and confirming via email!" class="de-submit"><input type="submit" value="Subscribe" class="de-button ss-button uv-button"/></span></form><section class="ly-section de-bio md-markdown"><p>Hi! I&apos;m an enthusiastic JavaScript hacker based in Buenos Aires, Argentina.</p><p>When I&apos;m not hacking away at freelance projects, or contributing to the open source community as <a href="https://web.archive.org/web/20150426055858/https://github.com/bevacqua" aria-label="@bevacqua on GitHub">@bevacqua</a>, I spend my time writing content for <a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/" aria-label="This blog!">Pony Foo</a>. Oh, I also give <a href="https://web.archive.org/web/20150426055858/http://bevacqua.io/talks" aria-label="(and post their slides to bevacqua.io)">talks</a>!</p><p>Do you have a freelance job, consulting work, or a conference talk opportunity? <a href="mailto:hello@bevacqua.io" aria-label="Send me an email">Say hi!</a></p><p>You can find me as <a href="https://web.archive.org/web/20150426055858/https://twitter.com/nzgb" aria-label="@nzgb on Twitter">@nzgb</a> on Twitter, because <a href="https://web.archive.org/web/20150426055858/http://xkcd.com/" aria-label="Musings of Randall Munroe">xkcd</a>. If you appreciate what I do, maybe consider <a href="https://web.archive.org/web/20150426055858/http://amzn.com/w/2PWAZWUXL08J9" aria-label="My Amazon Wishlist">getting me something to read</a>!</p><p><a href="https://web.archive.org/web/20150426055858/http://bevacqua.io/buildfirst" aria-label="JavaScript Application Design: A Build First Approach"><img alt="JavaScript Application Design" data-src="http://www.gravatar.com/avatar/cee019b251cf09f440b4427541e46cb8.png?s=250" class="js-only"><noscript><img src="https://web.archive.org/web/20150426055858im_/http://www.gravatar.com/avatar/cee019b251cf09f440b4427541e46cb8.png?s=250" alt="JavaScript Application Design"></noscript></a></p><p>Have you tried <a href="https://web.archive.org/web/20150426055858/http://bevacqua.io/buildfirst" aria-label="JavaScript Application Design: A Build First Approach">#buildfirst</a>?</p><p><sub>This blog is <a href="https://web.archive.org/web/20150426055858/http://github.com/ponyfoo/ponyfoo" aria-label="Pony Foo on GitHub">open-source</a>, of course!</sub></p></section><section class="ly-section al-archives"><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/archives" aria-label="The archives link to every single article ever published on Pony Foo!">Archives</a><span> and </span><a href="https://web.archive.org/web/20150426055858/http://ponyfoo.com/articles/feed" aria-label="Track our RSS feed and be the first to learn about freshly published content">RSS Feed</a></section><section class="de-back ly-section"><a href="#top" class="de-back-link"></a></section></aside><div class="pc-cube"><div class="pc-faces"><div class="pc-face pc-front">Pony</div><div class="pc-face pc-back">Foo</div><div class="pc-face pc-right">Pony</div><div class="pc-face pc-left">Foo</div><div class="pc-face pc-top">Pony</div><div class="pc-face pc-bottom">Foo</div></div></div><script>~function(a,n,t){function e(a){var t=n.createElement("script");t.src=a,n.body.appendChild(t)}function d(){var a=t.search,n=a?"&"+a.substr(1):"",d="?json&callback=taunusReady"+n;e(t.pathname+d),e("/js/all.cb9b1cae.js")}a.taunusReady=function(n){a.taunusReady=n},a.addEventListener?a.addEventListener("load",d,!1):a.attachEvent?a.attachEvent("onload",d):a.onload=d}(window,document,location);</script></body></html>




<!--
     FILE ARCHIVED ON 5:58:58 Apr 26, 2015 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 21:31:44 May 4, 2016.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
